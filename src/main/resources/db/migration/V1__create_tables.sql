CREATE TABLE marcas (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    nombre VARCHAR(100) NOT NULL,
    pais_origen VARCHAR(50),
    PRIMARY KEY (id)
);

CREATE TABLE modelos (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    nombre VARCHAR(100) NOT NULL,
    anio VARCHAR(4),
    marca_id BIGINT NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE piezas (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    nombre VARCHAR(100) NOT NULL,
    categoria VARCHAR(50),
    descripcion VARCHAR(255),
    PRIMARY KEY (id)
);

CREATE TABLE autopartes (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    codigo_producto VARCHAR(50) UNIQUE NOT NULL,
    modelo_id BIGINT NOT NULL,
    pieza_id BIGINT NOT NULL,
    precio DOUBLE PRECISION NOT NULL,
    stock INTEGER NOT NULL,
    estado VARCHAR(20),
    PRIMARY KEY (id)
);

ALTER TABLE modelos
    ADD CONSTRAINT FK_MODELOS_ON_MARCA FOREIGN KEY (marca_id) REFERENCES marcas (id);

ALTER TABLE autopartes
    ADD CONSTRAINT FK_AUTOPARTES_ON_MODELO FOREIGN KEY (modelo_id) REFERENCES modelos (id);

ALTER TABLE autopartes
    ADD CONSTRAINT FK_AUTOPARTES_ON_PIEZA FOREIGN KEY (pieza_id) REFERENCES piezas (id);
